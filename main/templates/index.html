<!-- {% extends 'base.html' %}
{% load static %}
{% block content %} -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRIVIOLIVIA.com - Earth's deepest trivia source</title>
    <link rel="stylesheet" href="{% static 'triviolivia.css' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'SVGs/favicon.svg' %}">
    
    <!-- Google Analytics Tag -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7JY71BDXF0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-7JY71BDXF0');
    </script>

    <script>
        function trackButtonClick(event) {
            var button = event.target;
            var buttonText = button.innerText || button.textContent || 'unknown-button';
            var category = 'General Button Click';
            var state = button.classList.contains('active') ? 'on' : 'off';

            if (button.id.includes('all-none')) {
                var groupName = '';
                var allActive = false;
                var allDisabled = false;

                if (button.id.includes('categories')) {
                    groupName = 'Categories';
                    allActive = document.querySelectorAll('.category').length === document.querySelectorAll('.category.active').length;
                    allDisabled = document.querySelectorAll('.category.active').length === 0;
                } else if (button.id.includes('difficulties')) {
                    groupName = 'Difficulties';
                    allActive = document.querySelectorAll('.difficulty').length === document.querySelectorAll('.difficulty.active').length;
                    allDisabled = document.querySelectorAll('.difficulty.active').length === 0;
                } else if (button.id.includes('eras')) {
                    groupName = 'Eras';
                    allActive = document.querySelectorAll('.era').length === document.querySelectorAll('.era.active').length;
                    allDisabled = document.querySelectorAll('.era.active').length === 0;
                }

                if (allActive) {
                    gtag('event', groupName + '_all', {
                        'event_category': groupName + ' Selection',
                        'event_label': groupName + ' ALL (enabled)'
                    });
                } else if (allDisabled) {
                    gtag('event', groupName + '_none', {
                        'event_category': groupName + ' Selection',
                        'event_label': groupName + ' NONE (disabled)'
                    });
                }
                return;
            }

            if (button.classList.contains('category')) {
                category = 'Category Selection';
            } else if (button.classList.contains('difficulty')) {
                category = 'Difficulty Selection';
            } else if (button.classList.contains('era')) {
                category = 'Era Selection';
            } else if (button.classList.contains('nav-button')) {
                category = 'Navigation';
            }

            gtag('event', buttonText.replace(/\s+/g, '_') + '_clicked_' + state, {
                'event_category': category,
                'event_label': buttonText + ' (' + state.toUpperCase() + ')'
            });
        }

        document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll("button").forEach(function (button) {
                button.addEventListener("click", trackButtonClick);
            });
        });
    </script>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="title">
            <h1>
                <a href="#" style="text-decoration: none; color: inherit;">
                    TRIVIOLIVIA<span class="smaller-font">.com</span>
                    <span class="somewhat-smaller-font">&nbsp;&nbsp;EARTH'S DEEPEST TRIVIA SOURCE</span>
                </a>
            </h1>
        </div>
        <div class="login">
            {% if user.is_authenticated %}
                <a class="nav-link" href="{% url 'configure:main' %}"><button class="nav-button">Configure</button></a>
                <a class="nav-link" href="#"><button class="nav-button">{{ user.username }}</button></a>
                <a class="nav-link" href="{% url 'logout' %}"><button class="nav-button">Logout</button></a>
            {% else %}
                <a class="nav-link" href="{% url 'register' %}"><button class="nav-button">Register</button></a>
                <a class="nav-link" href="{% url 'login' %}"><button class="nav-button">Login</button></a>
            {% endif %}
        </div> 
    </nav>

    <!-- Main Container -->
    <div id="main-container" class="main-container">
        <div id="main-container-inner" class="main-container-inner">

            <!-- Game Area -->
            <div id="game-area" class="game-area">
                <div id="about-us-card">
                    <div class="container">
                        <h2>WELCOME TO YOUR ENDLESS TRIVIA WORLD!</h2>
                        <p>Who are we? Here at Triviolivia, we are a team of trivia fans...</p>
                        <ul>
                            <li>25 categories</li>
                            <li>5 difficulty levels</li>
                            <li>12 eras</li>
                        </ul>
                        <p>Good luck. Have fun. Nerd up!</p>
                        <div class="footer">
                            <p>With love,</p>
                            <p>The Triviolivia Team</p>
                        </div>
                    </div>
                </div>

                <!-- Main game container -->
                <div id="container-game" class="container-game">
                    <div id='question-container' class="question-container"></div>
                    <div id='answer-container' class="answer-container"></div>
                </div>
            </div>

            <!-- Loading Bar -->
            <div id="loading-bar-container" class="loading-bar-container">
                <div id="loading-bar">
                    <div id="loading-text">
                        <p class="loader-text"></p>
                    </div>
                    <div id="progress"></div>
                </div>
            </div>
        </div>

        <!-- Side Menu -->
        <div class="side-column" id="side-column">
            <div id="start-game" class="start-game">
                <button onclick="dontFetchDataIfAllDeselected()" id="start-pause" type="button">START GAME</button>
            </div>

            <!-- Options Menu -->
            <div class="options-menu">
                <div class="wrap-collabsible">
                    <input id="collapsible-categories" class="toggle" type="checkbox">
                    <label for="collapsible-categories" class="lbl-toggle">CATEGORIES</label>
                    <div class="collapsible-content">
                        <button id="all-none-categories" class="all-none-btn" onclick="allNoneCategoriesButton()">ALL/NONE</button>
                        {% for category in categories %}
                            <div>
                                <button id="{{ category.id }}" class="button active category">
                                    {{ category.name | upper }}
                                </button>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div id="character">
                <img src="{% static 'SVGs/TO_OG.svg' %}" alt="Character">
            </div>
        </div>
    </div>

    <script src="{% static 'triviolivia.js' %}"></script>

{% endblock %}
</body>
</html>
